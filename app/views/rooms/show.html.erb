<div class="max-w-2xl mx-auto mt-10 border rounded-lg shadow-lg">

  <div class="bg-blue-600 text-white p-4 rounded-t-lg">
    <h1 class="text-lg font-semibold">
      <%= @room.name %>
    </h1>
  </div>

  <div id="messages"
       class="h-96 overflow-y-auto p-4 space-y-2 bg-gray-50">

    <% @room_messages.each do |message| %>

      <div class="bg-white p-2 rounded shadow-sm">

        <span class="font-semibold text-blue-600">
          <%= message.user.email %>
        </span>

        <span class="text-gray-800">
          <%= message.content %>
        </span>

      </div>

    <% end %>

  </div>

  <div class="border-t p-4">

    <%= form_with model: @room_message,
                  url: room_messages_path,
                  local: true,
                  data: { turbo: false },
                  class: "flex gap-2" do |f| %>

      <%= f.hidden_field :room_id, value: @room.id %>

      <%= f.text_field :content,
            class: "flex-1 border rounded px-3 py-2",
            placeholder: "Type your message..." %>

      <%= f.submit "Send",
            class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>

    <% end %>

  </div>

</div>

<script>
  const messages = document.getElementById("messages")
  if(messages){
    messages.scrollTop = messages.scrollHeight
  }
</script>